
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Fulfillment Service Integration Guide</title>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-P2LGV7S');</script>
    <!-- End Google Tag Manager -->
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
      .tab-json--inline table td { padding: 5px; }
.tab-json--inline table pre { margin: 0; }
.tab-json--inline, .tab-json--inline .w {
  color: #586e75;
}
.tab-json--inline .err {
  color: #002b36;
  background-color: #dc322f;
}
.tab-json--inline .c, .tab-json--inline .cd, .tab-json--inline .cm, .tab-json--inline .c1, .tab-json--inline .cs {
  color: #657b83;
}
.tab-json--inline .cp {
  color: #b58900;
}
.tab-json--inline .nt {
  color: #b58900;
}
.tab-json--inline .o, .tab-json--inline .ow {
  color: #93a1a1;
}
.tab-json--inline .p, .tab-json--inline .pi {
  color: #93a1a1;
}
.tab-json--inline .gi {
  color: #859900;
}
.tab-json--inline .gd {
  color: #dc322f;
}
.tab-json--inline .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.tab-json--inline .k, .tab-json--inline .kn, .tab-json--inline .kp, .tab-json--inline .kr, .tab-json--inline .kv {
  color: #6c71c4;
}
.tab-json--inline .kc {
  color: #cb4b16;
}
.tab-json--inline .kt {
  color: #cb4b16;
}
.tab-json--inline .kd {
  color: #cb4b16;
}
.tab-json--inline .s, .tab-json--inline .sb, .tab-json--inline .sc, .tab-json--inline .sd, .tab-json--inline .s2, .tab-json--inline .sh, .tab-json--inline .sx, .tab-json--inline .s1 {
  color: #859900;
}
.tab-json--inline .sr {
  color: #2aa198;
}
.tab-json--inline .si {
  color: #d33682;
}
.tab-json--inline .se {
  color: #d33682;
}
.tab-json--inline .nn {
  color: #b58900;
}
.tab-json--inline .nc {
  color: #b58900;
}
.tab-json--inline .no {
  color: #b58900;
}
.tab-json--inline .na {
  color: #268bd2;
}
.tab-json--inline .m, .tab-json--inline .mf, .tab-json--inline .mh, .tab-json--inline .mi, .tab-json--inline .il, .tab-json--inline .mo, .tab-json--inline .mb, .tab-json--inline .mx {
  color: #859900;
}
.tab-json--inline .ss {
  color: #859900;
}
    </style>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
    <link href="../images/favicon.ico" rel="icon" type="image/ico" />
    <script src="../javascripts/all.js"></script>
  </head>

  <body class="guides guides_3pl" data-languages="[&quot;ruby&quot;,&quot;shell&quot;]">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2LGV7S"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="site-topbar">
      <a class="site-topbar__link" target="_blank" href="https://tradegecko.com/blog/tradegecko/acquired-by-intuit">TradeGecko is now QuickBooks Commerce.</a>
    </div>

    <div class="base">
      <div class="base__header">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <header class='site-header'>
          <div class="site-header__branding col-sm p-0">
            <a href="/" class="site-header__logo" ></a>
            <a href="/" class="site-header__title" >Developer
            </a>
            <i class="burger fas fa-bars" class="burger"></i>
            <nav>
              <a class="nav-link" href="/">Home</a>
              <a class="nav-link" href="/docs.html">API Docs</a>
              <a class="nav-link" href="https://go.tradegecko.com/apps" target="_blank">App Store</a>
              <a class="nav-link" href="https://github.com/tradegecko/smaug/issues" target="_blank">Community</a>
              <a class="nav-link" href="/changes.html">Changelog</a>
            </nav>
          </div>
        </header>
      </div>
    </div>
  </div>
  <div>
    <div class="container">
      <div class="search-wrapper">
  <div class="search">
    <input type="text" class="search" id="input-search" placeholder="Search the API docs...">
  </div>
  <ul class="search-results"></ul>
</div>

    </div>
  </div>
</div>

      <div class="base__body">
        <div class="container content">
          <div class="guides-main-container">
<div>
  <h1 class="mt-2">Fulfillment Service Integration Guide</h1>
  <p>This guide explains how to use QuickBooks Commerce API to integrate with a fulfillment service - a third party warehouse that prepares and ships orders on behalf of a merchant on QuickBooks Commerce. You can use these resources to receive and create fulfillments.</p>

  In this guide:
  <ul class="mt-2">
      <li><a href="#fulfillment_resources">Fulfillment Resources</a></li>
      <li><a href="#fulfillment_behaviour">Fulfillment Behaviour</a></li>
      <li><a href="#completing_a_fulfillment">Completing a Fulfillment</a></li>
      <li><a href="#handling_returns">Handling Returns</a></li>
      <li><a href="#additional_resources">Additional Resources</a></li>
      <li><a href="#support">Support</a></li>
  </ul>
</div>

<div id="fulfillment_resources" class="guide-section">
  <h2>Fulfillment Resources</h2>
  <p>Before you start working on a fulfillment integration with QuickBooks Commerce, it's helpful to understand some of the different fulfillment-related resources.</p>
  <ul class="mt-2">
      <li class="mt-1"><b>Sales Order</b>:&nbsp;Contains information about a sales order, its associated order line items and fulfillments. Order line items contain information such as variants and tax types.</li>
        <ul>
            <li>An order in QuickBooks Commerce can have 1 of 6 statuses:&nbsp;<code>draft</code>, <code>active</code>, <code>finalized</code>, <code>fulfilled</code>, <code>void</code> or <code>deleted</code>.</li>
            <li>When an order is fully shipped, the order status will be changed to <code>fulfilled</code>.</li>
        </ul>
      <li class="mt-1"><b>Fulfillment</b>:&nbsp;Represents a shipment of one or more items in a sales order. It contains information about the shipment, such as the ship to address (<code>shipping_address</code>), ship from address (<code>stock_location_id</code>), tracking information and an array of fulfillment line items.</li>
        <ul>
            <li>A fulfillment in QuickBooks Commerce can have 1 of 4 statuses:&nbsp;<code>packed</code>, <code>fulfilled</code>, <code>void</code> or <code>deleted</code>.</li>
            <li>A fulfillment is created with a status of <code>packed</code> by default. After the fulfillment is shipped, its status should be updated to <code>fulfilled</code>.</li>
        </ul>
      <li class="mt-1"><b>Fulfillment Line Item</b>:&nbsp;Contains information about the order line item and quantity of the order line itemâ€™s variant which is being fulfilled.</li>
      <li class="mt-1"><b>Address</b>:&nbsp;Represents a physical address of a merchant's supplier or customer created and stored in the QuickBooks Commerce Relationships section.</li>
      <li class="mt-1"><b>Location</b>:&nbsp;Represents a geographical location where a merchant can receive, store and transfer goods.</li>
  </ul>
</div>

<div id="fulfillment_behaviour" class="guide-section">
  <h2>Fulfillment Behaviour</h2>
  <p>Each order includes an array of order line items that needs to be fulfilled. Each order line item can be packed and fulfilled separately, depending on how the inventory is packed and managed.</p>
  <img class="center" src="../images/sales_order.jpg">
  <ul class="mt-2">
      <li class="mt-1">Scenario 1:&nbsp;If <a href="https://share.vidyard.com/watch/s4JwXfrBzYhg8GZVw4ed6T?" target="_blank">packing is handled by a merchant</a>  while shipping is handled by the fulfillment service, the fulfillment service should subscribe to the <code>fulfillment.create</code> webhook to be notified of any new fulfillments to be shipped.</li>
      <li class="mt-1">Scenario 2:&nbsp;If both packing and shipping are handled by the fulfillment service, the fulfillment service should subscribe to the <code>order.create</code> webhook to be notified when a new order is created.</li>
        <ul>
            <li>The fulfillment service can pack all order line items through an API call to:&nbsp;<code>POST /orders/[:order_id]/actions/pack</code>. This will create a fulfillment for all order line items with status <code>packed</code>.</li>
            <li>Once the fulfillment has been shipped, the status can be updated to <code>fulfilled</code> through an API call to:&nbsp;<code>POST /orders/[:order_id]/actions/fulfill</code>.</li>
        </ul>
  </ul>
</div>

<div id="completing_a_fulfillment" class="guide-section">
  <h2>Completing a Fulfillment</h2>
  <div class="scenario-section">
    <h3><b>Scenario 1:&nbsp;Merchant is in charge of packing. Fulfillment service completes the shipment after items are packed.</b></h3>
    <ul>
      <li>Step 1:&nbsp;Receive a fulfillment alert from <code>fulfillment.create</code> webhook.</li>
      <li>Step 2:&nbsp;Query the fulfillment to see the fulfillment line items.</li>
      <li>Step 3:&nbsp;Update fulfillment status to <code>fulfilled</code>.</li>
    </ul>
    <div class="step-section">
      <h3>Step 1:&nbsp;Receive a fulfillment alert from <code>fulfillment.create</code> webhook.</h3>
      <p>To get started, subscribe to the <code>fulfillment.create</code> webhook to be notified when a fulfillment is created for an order.</p>
<div class="lang-selector">
      <a href="#" data-language-name="ruby">ruby</a>
      <a href="#" data-language-name="shell">shell</a>
</div>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'gecko-ruby'</span>
<span class="n">gecko</span> <span class="o">=</span> <span class="no">Gecko</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">&lt;</span><span class="no">OAUTH_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">OAUTH_SECRET</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="no">OAuth2</span><span class="o">::</span><span class="no">AccessToken</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">gecko</span><span class="p">.</span><span class="nf">oauth_client</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">ACCESS_TOKEN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">gecko</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
<span class="n">webhook</span> <span class="o">=</span> <span class="n">gecko</span><span class="o">.</span><span class="no">Webhook</span><span class="p">.</span><span class="nf">build</span><span class="p">({</span><span class="ss">:address</span><span class="o">=&gt;</span><span class="s2">"https://mywebsite.com/webhooks"</span><span class="p">,</span> <span class="ss">:event</span><span class="o">=&gt;</span><span class="s2">"fulfillment.create"</span><span class="p">})</span>
<span class="n">webhook</span><span class="p">.</span><span class="nf">save</span>

<span class="p">{</span>
  <span class="s2">"webhook"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2018-09-24T11:12:49.244Z"</span><span class="p">,</span>
    <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2018-09-24T11:12:49.244Z"</span><span class="p">,</span>
    <span class="s2">"event"</span><span class="p">:</span> <span class="s2">"fulfillment.create"</span><span class="p">,</span>
    <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"https://mywebsite.com/webhooks"</span><span class="p">,</span>
    <span class="s2">"oauth_application_id"</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Authorization: Bearer &lt;ACCESS_TOKEN&gt;"</span>
https://api.tradegecko.com/webhooks/ -d <span class="s1">'{"webhook":{"address":"https://mywebsite.com/webhooks","event":"fulfillment.create"}'</span><span class="o">}</span>

<span class="o">{</span>
  <span class="s2">"webhook"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"created_at"</span>: <span class="s2">"2018-09-24T11:12:49.244Z"</span>,
    <span class="s2">"updated_at"</span>: <span class="s2">"2018-09-24T11:12:49.244Z"</span>,
    <span class="s2">"event"</span>: <span class="s2">"fulfillment.create"</span>,
    <span class="s2">"address"</span>: <span class="s2">"https://mywebsite.com/webhooks"</span>,
    <span class="s2">"oauth_application_id"</span>: 1
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p></div></p>

<p><div class="step-section">
      <h3>Step 2:&nbsp;Query the fulfillment to see the fulfillment line items.</h3>
      <p>If your fulfillment service only handles fulfillment in certain stock locations, you can check the <code>stock_location_id</code> of the fulfillment to determine if you should ship any variants. You can also refer to the <code>quantity</code> and <code>variant_id</code> or <code>variant_sku</code> fields on the fulfillment line items to determine which and how many items to ship.</p></p>

<div class="lang-selector">
      <a href="#" data-language-name="ruby">ruby</a>
      <a href="#" data-language-name="shell">shell</a>
</div>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'gecko-ruby'</span>
<span class="n">gecko</span> <span class="o">=</span> <span class="no">Gecko</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">&lt;</span><span class="no">OAUTH_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">OAUTH_SECRET</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="no">OAuth2</span><span class="o">::</span><span class="no">AccessToken</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">gecko</span><span class="p">.</span><span class="nf">oauth_client</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">ACCESS_TOKEN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">gecko</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
<span class="n">gecko</span><span class="o">.</span><span class="no">Fulfillment</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="p">{</span>
  <span class="s2">"fulfillment"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2015-11-02T01:22:25.524Z"</span><span class="p">,</span>
    <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2015-12-02T01:11:25.524Z"</span><span class="p">,</span>
    <span class="s2">"stock_location_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"fulfillment_line_item_ids"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="sr">//</span> <span class="n">more</span> <span class="n">fields</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X GET -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Authorization: Bearer &lt;ACCESS_TOKEN&gt;"</span>
https://api.tradegecko.com/fulfillments/1?include<span class="o">=</span>fulfillment_line_items

<span class="o">{</span>
  <span class="s2">"fulfillment_line_items"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: 1,
      <span class="s2">"created_at"</span>: <span class="s2">"2015-11-02T01:22:25.524Z"</span>,
      <span class="s2">"updated_at"</span>: <span class="s2">"2015-12-02T01:11:25.524Z"</span>,
      <span class="s2">"variant_id"</span>: 1,
      <span class="s2">"variant_sku"</span>: <span class="s2">"SKU123"</span>,
      <span class="s2">"quantity"</span>: 1
      // more fields
    <span class="o">}</span>,
  <span class="o">]</span>,
  <span class="s2">"fulfillment"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"created_at"</span>: <span class="s2">"2015-11-02T01:22:25.524Z"</span>,
    <span class="s2">"updated_at"</span>: <span class="s2">"2015-12-02T01:11:25.524Z"</span>,
    <span class="s2">"stock_location_id"</span>: 1,
    <span class="s2">"fulfillment_line_item_ids"</span>: <span class="o">[</span>1],
    // more fields
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p></div></p>

<p><div class="step-section">
      <h3>Step 3:&nbsp;Update fulfillment status to <code>fulfilled</code>.</h3>
      <p>After shipping a fulfillment, you can update the <code>status</code> of the fulfillment to <code>fulfilled</code> and include information like <code>tracking_company</code>, <code>tracking_number</code> and <code>tracking_url</code>.</p></p>

<div class="lang-selector">
      <a href="#" data-language-name="ruby">ruby</a>
      <a href="#" data-language-name="shell">shell</a>
</div>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'gecko-ruby'</span>
<span class="n">gecko</span> <span class="o">=</span> <span class="no">Gecko</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">&lt;</span><span class="no">OAUTH_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">OAUTH_SECRET</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="no">OAuth2</span><span class="o">::</span><span class="no">AccessToken</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">gecko</span><span class="p">.</span><span class="nf">oauth_client</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">ACCESS_TOKEN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">gecko</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
<span class="n">fulfillment</span> <span class="o">=</span> <span class="n">gecko</span><span class="o">.</span><span class="no">Fulfillment</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">fulfillment</span><span class="p">.</span><span class="nf">attributes</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">status: </span><span class="s2">"fulfilled"</span><span class="p">,</span>
  <span class="ss">tracking_company: </span><span class="s2">"GeckoShip"</span><span class="p">,</span>
  <span class="ss">tracking_number: </span><span class="s2">"123TrackMe"</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">fulfillment</span><span class="p">.</span><span class="nf">save</span>

<span class="p">{</span>
  <span class="s2">"fulfillment"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2015-11-02T01:22:25.524Z"</span><span class="p">,</span>
    <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2015-12-02T01:11:25.524Z"</span><span class="p">,</span>
    <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"fulfilled"</span><span class="p">,</span>
    <span class="s2">"tracking_company"</span><span class="p">:</span> <span class="s2">"GeckoShip"</span><span class="p">,</span>
    <span class="s2">"tracking_number"</span><span class="p">:</span> <span class="s2">"123TrackMe"</span><span class="p">,</span>
    <span class="sr">//</span> <span class="n">more</span> <span class="n">fields</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X PUT -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Authorization: Bearer &lt;ACCESS_TOKEN&gt;"</span>
https://api.tradegecko.com/fulfillments/1 -d <span class="s1">'{"fulfillment":{"status":"fulfilled","tracking_company":"GeckoShip","tracking_number":"123TrackMe"}}'</span>

<span class="o">{</span>
  <span class="s2">"fulfillment_line_items"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: 1,
      <span class="s2">"created_at"</span>: <span class="s2">"2015-11-02T01:22:25.524Z"</span>,
      <span class="s2">"updated_at"</span>: <span class="s2">"2015-12-02T01:11:25.524Z"</span>,
      // more fields
    <span class="o">}</span>,
  <span class="o">]</span>,
  <span class="s2">"fulfillment"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"created_at"</span>: <span class="s2">"2015-11-02T01:22:25.524Z"</span>,
    <span class="s2">"updated_at"</span>: <span class="s2">"2015-12-02T01:11:25.524Z"</span>,
    <span class="s2">"tracking_company"</span>: <span class="s2">"GeckoShip"</span>,
    <span class="s2">"tracking_number"</span>: <span class="s2">"123TrackMe"</span>,
    <span class="s2">"status"</span>: <span class="s2">"fulfilled"</span>,
    <span class="s2">"stock_location_id"</span>: 1,
    <span class="s2">"fulfillment_line_item_ids"</span>: <span class="o">[</span>1],
    // more fields
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p></div></p>

<p><div>
      <h3><b>Notes:</b></h3>
      <ul>
          <li><b>Query the order to see its order line items:</b>&nbsp;In QuickBooks Commerce, merchants have the option to partially pack order line items. For example, a merchant may choose to pack only 5 out of 10 items from an order line item.</li>
      </ul>
      <div>
        <video autoplay loop class="mr-auto ml-auto guide-section__video-container" poster="http://g.recordit.co/XYTdxZqUDG.gif"></video>
      </div>
      <p>
        As a result, a fulfillment service may need to query for order line items and determine the outstanding items to be shipped in upcoming fulfillments.
      </p></p>

<div class="lang-selector">
      <a href="#" data-language-name="ruby">ruby</a>
      <a href="#" data-language-name="shell">shell</a>
</div>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'gecko-ruby'</span>
<span class="n">gecko</span> <span class="o">=</span> <span class="no">Gecko</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">&lt;</span><span class="no">OAUTH_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">OAUTH_SECRET</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="no">OAuth2</span><span class="o">::</span><span class="no">AccessToken</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">gecko</span><span class="p">.</span><span class="nf">oauth_client</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">ACCESS_TOKEN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">gecko</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
<span class="n">gecko</span><span class="o">.</span><span class="no">Order</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="p">{</span>
  <span class="s2">"order"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2015-11-12T08:06:01.561Z"</span><span class="p">,</span>
    <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2015-11-12T08:06:01.561Z"</span><span class="p">,</span>
    <span class="s2">"order_line_item_ids"</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">]</span>
  <span class="sr">//</span> <span class="n">more</span> <span class="n">fields</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Authorization: Bearer &lt;ACCESS_TOKEN&gt;"</span>
https://api.tradegecko.com/orders/1?include<span class="o">=</span>order_line_items

<span class="o">{</span>
  <span class="s2">"order_line_items"</span>: <span class="o">[</span>
    // order line item attributes
  <span class="o">]</span>,
  <span class="s2">"order"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"created_at"</span>: <span class="s2">"2015-11-12T08:06:01.561Z"</span>,
    <span class="s2">"updated_at"</span>: <span class="s2">"2015-11-12T08:06:01.561Z"</span>,
    <span class="s2">"order_line_item_ids"</span>: <span class="o">[</span>
      1,
      2
    <span class="o">]</span>
  // more fields
<span class="o">}</span>
</code></pre>
<p></div>
  </div></p>

<p><div class="scenario-section">
    <h3><b>Scenario 2:&nbsp;Fulfillment service is in charge of packing and fulfilling an order.</b></h3></p>

<p><ul>
      <li>Step 1:&nbsp;Receive an order alert from <code>order.create</code> webhook.</li>
      <li>Step 2:&nbsp;Query the order to see the order line items.</li>
      <li>Step 3:&nbsp;Create a new fulfillment.</li>
    </ul></p>

<p><div class="step-section">
      <h3>Step 1:&nbsp;Receive an order alert from <code>order.create</code> webhook.</h3>
      <p>To get started, subscribe to the <code>order.create</code> webhook to be notified when a new order comes in.</p></p>

<div class="lang-selector">
      <a href="#" data-language-name="ruby">ruby</a>
      <a href="#" data-language-name="shell">shell</a>
</div>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'gecko-ruby'</span>
<span class="n">gecko</span> <span class="o">=</span> <span class="no">Gecko</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">&lt;</span><span class="no">OAUTH_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">OAUTH_SECRET</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="no">OAuth2</span><span class="o">::</span><span class="no">AccessToken</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">gecko</span><span class="p">.</span><span class="nf">oauth_client</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">ACCESS_TOKEN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">gecko</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
<span class="n">webhook</span> <span class="o">=</span> <span class="n">gecko</span><span class="o">.</span><span class="no">Webhook</span><span class="p">.</span><span class="nf">build</span><span class="p">({</span><span class="ss">:address</span><span class="o">=&gt;</span><span class="s2">"https://mywebsite.com/webhooks"</span><span class="p">,</span> <span class="ss">:event</span><span class="o">=&gt;</span><span class="s2">"order.create"</span><span class="p">})</span>
<span class="n">webhook</span><span class="p">.</span><span class="nf">save</span>

<span class="p">{</span>
  <span class="s2">"webhook"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2018-09-24T11:12:49.244Z"</span><span class="p">,</span>
    <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2018-09-24T11:12:49.244Z"</span><span class="p">,</span>
    <span class="s2">"event"</span><span class="p">:</span> <span class="s2">"order.create"</span><span class="p">,</span>
    <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"https://mywebsite.com/webhooks"</span><span class="p">,</span>
    <span class="s2">"oauth_application_id"</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Authorization: Bearer &lt;ACCESS_TOKEN&gt;"</span>
https://api.tradegecko.com/webhooks/ -d <span class="s1">'{"webhook":{"address":"https://mywebsite.com/webhooks","event":"order.create"}'</span><span class="o">}</span>

<span class="o">{</span>
  <span class="s2">"webhook"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"created_at"</span>: <span class="s2">"2018-09-24T11:12:49.244Z"</span>,
    <span class="s2">"updated_at"</span>: <span class="s2">"2018-09-24T11:12:49.244Z"</span>,
    <span class="s2">"event"</span>: <span class="s2">"order.create"</span>,
    <span class="s2">"address"</span>: <span class="s2">"https://mywebsite.com/webhooks"</span>,
    <span class="s2">"oauth_application_id"</span>: 1
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p></div></p>

<p><div class="step-section">
      <h3>Step 2:&nbsp;Query the order to see the order line items.</h3>
      <p>Note:&nbsp;If your fulfillment service only handles fulfillments in certain stock locations, you can check the order&#39;s <code>stock_location_id</code> to determine if you should fulfill it.</p></p>

<div class="lang-selector">
      <a href="#" data-language-name="ruby">ruby</a>
      <a href="#" data-language-name="shell">shell</a>
</div>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'gecko-ruby'</span>
<span class="n">gecko</span> <span class="o">=</span> <span class="no">Gecko</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">&lt;</span><span class="no">OAUTH_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">OAUTH_SECRET</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="no">OAuth2</span><span class="o">::</span><span class="no">AccessToken</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">gecko</span><span class="p">.</span><span class="nf">oauth_client</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">ACCESS_TOKEN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">gecko</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
<span class="n">gecko</span><span class="o">.</span><span class="no">Order</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="p">{</span>
  <span class="s2">"order"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2015-11-12T08:06:01.561Z"</span><span class="p">,</span>
    <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2015-11-12T08:06:01.561Z"</span><span class="p">,</span>
    <span class="s2">"stock_location_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"order_line_item_ids"</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">]</span>
  <span class="sr">//</span> <span class="n">more</span> <span class="n">fields</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Authorization: Bearer &lt;ACCESS_TOKEN&gt;"</span>
https://api.tradegecko.com/orders/1?include<span class="o">=</span>order_line_items

<span class="o">{</span>
  <span class="s2">"order_line_items"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"id"</span>: 1,
      <span class="s2">"created_at"</span>: <span class="s2">"2015-11-12T08:06:01.561Z"</span>,
      <span class="s2">"updated_at"</span>: <span class="s2">"2015-11-12T08:06:01.561Z"</span>,
      // more fields
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"order"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"created_at"</span>: <span class="s2">"2015-11-12T08:06:01.561Z"</span>,
    <span class="s2">"updated_at"</span>: <span class="s2">"2015-11-12T08:06:01.561Z"</span>,
    <span class="s2">"stock_location_id"</span>: 1,
    <span class="s2">"order_line_item_ids"</span>: <span class="o">[</span>
      1
    <span class="o">]</span>
    // more fields
<span class="o">}</span>
</code></pre>
<p></div></p>

<p><div class="step-section">
      <h3>Step 3:&nbsp;Create a new fulfillment.</h3>
      <p>A fulfillment service can either partially or completely fulfill an order.</p>
      <p>To completely fulfill an order, create a fulfillment using <code>POST /orders/[:order_id]/actions/fulfil</code>. Do note that this will create a fulfillment with status <code>fulfilled</code> for all unpacked order line items and also update the status of all existing <code>packed</code> fulfillments to <code>fulfilled</code>.</p>
      <p>To partially fulfill an order, pass in the <code>order_line_item_ids</code> and quantities to be fulfilled. Do note that this will create a fulfillment with status <code>packed</code>. After shipping the fulfillment, you can update the status to <code>fulfilled</code> as seen in Scenario 1 - Step 3.</p></p>

<div class="lang-selector">
      <a href="#" data-language-name="ruby">ruby</a>
      <a href="#" data-language-name="shell">shell</a>
</div>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'gecko-ruby'</span>
<span class="n">gecko</span> <span class="o">=</span> <span class="no">Gecko</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">&lt;</span><span class="no">OAUTH_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">OAUTH_SECRET</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="no">OAuth2</span><span class="o">::</span><span class="no">AccessToken</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">gecko</span><span class="p">.</span><span class="nf">oauth_client</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">ACCESS_TOKEN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">gecko</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
<span class="n">fulfillment</span> <span class="o">=</span> <span class="n">gecko</span><span class="o">.</span><span class="no">Fulfillment</span><span class="p">.</span><span class="nf">build</span><span class="p">({</span><span class="ss">:order_id</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="ss">:packed_at</span><span class="o">=&gt;</span><span class="s2">"Time.now"</span><span class="p">,</span> <span class="ss">:billing_address_id</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="ss">:shipping_address_id</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="ss">:fulfillment_line_items</span><span class="o">=&gt;</span><span class="p">[{</span><span class="ss">:order_line_item_id</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="ss">:order_line_item_id</span><span class="o">=&gt;</span><span class="mi">2</span><span class="p">}]})</span>
<span class="n">fulfillment</span><span class="p">.</span><span class="nf">save</span>

<span class="p">{</span>
  <span class="s2">"fulfillment"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2015-11-02T01:22:25.524Z"</span><span class="p">,</span>
    <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2015-11-02T01:22:25.524Z"</span><span class="p">,</span>
    <span class="s2">"order_id"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">"shipping_address_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"billing_address_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"stock_location_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"fulfillment_line_item_ids"</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">]</span>
    <span class="sr">//</span> <span class="n">more</span> <span class="n">fields</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Authorization: Bearer &lt;ACCESS_TOKEN&gt;"</span>
https://api.tradegecko.com/fulfillments/ -d <span class="s1">'{"fulfillment":{"order_id":1,"packed_at":"Time.now","billing_address_id":1,"shipping_address_id":1,"fulfillment_line_items":[{"order_line_item_id":1},{"order_line_item_id":2}]}'</span><span class="o">}</span>
<span class="o">{</span>
  <span class="s2">"fulfillment"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"created_at"</span>: <span class="s2">"2015-11-02T01:22:25.524Z"</span>,
    <span class="s2">"updated_at"</span>: <span class="s2">"2015-11-02T01:22:25.524Z"</span>,
    <span class="s2">"order_id"</span>: 2,
    <span class="s2">"shipping_address_id"</span>: 1,
    <span class="s2">"billing_address_id"</span>: 1,
    <span class="s2">"stock_location_id"</span>: 1,
    <span class="s2">"fulfillment_line_item_ids"</span>: <span class="o">[</span>
      1,
      2
    <span class="o">]</span>
    // more fields
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p></div></p>

<p><div>
      <h3><b>Notes:</b></h3>
      <ul>
          <li>The fulfillment <code>stock_location_id</code> will default to the order <code>stock_location id</code> unless a <code>stock_location_id</code> is specified on fulfillment creation.</li>
          <li>As merchants may have already created fulfillments, you may need to check if there are existing fulfillments before creating new ones.</li>
      </ul>
    </div>
  </div></p>

<p><div id="handling_returns" class="guide-section">
    <h2>Handling Returns</h2>
      <p>Depending on a merchant&#39;s return policy, there may be a need to create a fulfillment return or void an order. You can return an entire order or part of an order.</p>
      <p>In the event that your company is handling the return through QuickBooks Commerce API, you can create a <code>fulfillment_return</code> as shown below:&nbsp;</p></p>

<div class="lang-selector">
      <a href="#" data-language-name="ruby">ruby</a>
      <a href="#" data-language-name="shell">shell</a>
</div>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'gecko-ruby'</span>
<span class="n">gecko</span> <span class="o">=</span> <span class="no">Gecko</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">&lt;</span><span class="no">OAUTH_ID</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">OAUTH_SECRET</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="no">OAuth2</span><span class="o">::</span><span class="no">AccessToken</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">gecko</span><span class="p">.</span><span class="nf">oauth_client</span><span class="p">,</span> <span class="o">&lt;</span><span class="no">ACCESS_TOKEN</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">gecko</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
<span class="n">fulfillment_return</span> <span class="o">=</span> <span class="n">gecko</span><span class="o">.</span><span class="no">FulfillmentReturn</span><span class="p">.</span><span class="nf">build</span><span class="p">({</span><span class="ss">:order_id</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="ss">:fulfillment_return_line_items</span><span class="o">=&gt;</span><span class="p">[{</span><span class="ss">:order_line_item_id</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="ss">:quantity</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="ss">:order_line_item_id</span><span class="o">=&gt;</span><span class="mi">2</span><span class="p">,</span> <span class="ss">:quantity</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">}]})</span>
<span class="n">fulfillment_return</span><span class="p">.</span><span class="nf">save</span>

<span class="p">{</span>
  <span class="s2">"fulfillment_return"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"created_at"</span><span class="p">:</span> <span class="s2">"2015-11-02T01:22:25.535Z"</span><span class="p">,</span>
    <span class="s2">"updated_at"</span><span class="p">:</span> <span class="s2">"2015-11-02T01:22:25.535Z"</span><span class="p">,</span>
    <span class="s2">"order_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"location_id"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"delivery_type"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">"exchange_rate"</span><span class="p">:</span> <span class="s2">"1.0"</span><span class="p">,</span>
    <span class="s2">"notes"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">"received_at"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">"tracking_company"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">"tracking_number"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">"tracking_url"</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"returning"</span><span class="p">,</span>
    <span class="s2">"credit_note_number"</span><span class="p">:</span> <span class="s2">"CN0001"</span><span class="p">,</span>
    <span class="s2">"order_number"</span><span class="p">:</span> <span class="s2">"SO0001"</span><span class="p">,</span>
    <span class="s2">"company_id"</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Authorization: Bearer &lt;ACCESS_TOKEN&gt;"</span>
https://api.tradegecko.com/fulfillment_returns/ -d <span class="s1">'{"fulfillment_return":{"order_id":1,"fulfillment_return_line_items":[{"order_line_item_id":1,"quantity":1},{"order_line_item_id":2,"quantity":1}]}'</span><span class="o">}</span>

<span class="o">{</span>
  <span class="s2">"fulfillment_return"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"created_at"</span>: <span class="s2">"2015-11-02T01:22:25.535Z"</span>,
    <span class="s2">"updated_at"</span>: <span class="s2">"2015-11-02T01:22:25.535Z"</span>,
    <span class="s2">"order_id"</span>: 1,
    <span class="s2">"location_id"</span>: 1,
    <span class="s2">"delivery_type"</span>: null,
    <span class="s2">"exchange_rate"</span>: <span class="s2">"1.0"</span>,
    <span class="s2">"notes"</span>: null,
    <span class="s2">"received_at"</span>: null,
    <span class="s2">"tracking_company"</span>: null,
    <span class="s2">"tracking_number"</span>: null,
    <span class="s2">"tracking_url"</span>: null,
    <span class="s2">"status"</span>: <span class="s2">"returning"</span>,
    <span class="s2">"credit_note_number"</span>: <span class="s2">"CN0001"</span>,
    <span class="s2">"order_number"</span>: <span class="s2">"SO0001"</span>,
    <span class="s2">"company_id"</span>: 1
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p></div></p>

<p><div>
      <h3><b>Tips:</b></h3>
      <ul>
          <li>If fulfillment return creation is handled by the merchant, you can subscribe to the <code>fulfillment_return.create</code> webhook to receive notifications.</li>
      </ul>
    </div></p>

<p><div>
      <h3><b>Notes:</b></h3>
      <ul>
          <li>You cannot delete a fulfillment if there are any associated fulfillment returns.</li>
          <li>If a merchant is integrated with an accounting platform on QuickBooks Commerce, creating a fulfillment return would create a credit note on the accounting platform.</li>
          <li>Refunds are currently not supported. If you need an endpoint for the refund process, let us know <a target="_blank" href="https://tradegecko.typeform.com/to/A2ewy0">here</a>.</li>
          <li>You can void an order via the <a target="_blank" href="/docs.html#order-actions">order&#39;s void endpoint</a>.</li>
      </ul>
    </div>
  </div></p>

<p><div id="additional_resources" class="guide-section">
  <h2>Additional Resources</h2>
  <p>See these additional resources for more information about authorization, webhooks and order actions.</p>
  <ul>
    <li><a target="_blank" href="/docs.html#authentication">Getting API key for Authentication</a></li>
    <li><a target="_blank" href="/docs.html#webhook">Using Webhooks</a></li>
    <li><a target="_blank" href="/docs.html#order-actions">Order Actions</a></li>
    <li><a target="_blank" href="https://github.com/tradegecko/smaug/issues">QuickBooks Commerce API Forum</a></li>
  </ul>
</div></p>

<p><div id="support" class="guide-section">
  <h2>Support</h2>
  <p>For API feature requests, bug reports and other questions related to API guides, contact <a href="mailto:support@tradegecko.com">support@tradegecko.com</a>.</p>
</div></p>

<p></div></p>

        </div>
      </div>
      <div class="feedback-banner">
    <h2>
      Got Feedback? We want to hear from you!
    </h2>
    <a target="_blank" href="https://tradegecko.typeform.com/to/A2ewy0" class="btn btn-big btn-primary" >
      Give Feedback
    </a>
</div>
<div class="base__footer">
  <div class="footer-wrapper">
    <div class="container">
      <div class="row">
          <div class="col-3">
          <h4>Company</h4>
            <ul class="link-list">
                <li><a href="https://www.tradegecko.com/about-us" target="_blank">About us</a></li>
                <li><a href="https://www.tradegecko.com/team" target="_blank">Meet the Team</a></li>
                <li><a href="https://www.tradegecko.com/jobs" target="_blank">Careers</a></li>
                <li><a href="https://www.tradegecko.com/press-kit" target="_blank">Press kit</a></li>
            </ul>
          </div>
          <div class="col-3">
          <h4>Contact</h4>
            <ul class="link-list">
                <li><a href="https://www.tradegecko.com/contact-us" target="_blank">Contact us</a></li>
                <li><a href="mailto:hello@tradegecko.com" target="_blank">Email us</a></li>
                <li><a href="https://www.tradegecko.com/contact-us" target="_blank">Visit us</a></li>
            </ul>
          </div>
          <div class="col-3">
          <h4>Getting Help</h4>
            <ul class="link-list">
                <li><a href="http://support.tradegecko.com" target="_blank">Help Desk</a></li>
                <li><a href="https://www.tradegecko.com/faq" target="_blank">FAQ</a></li>
                <li><a href="https://status.tradegecko.com" target="_blank">Staus</a></li>
            </ul>
          </div>
          <div class="col-3">
          <h4>Partners</h4>
            <ul class="link-list">
                <li><a href="https://www.tradegecko.com/partners" target="_blank">Become a partner</a></li>
                <li><a href="https://partners.tradegecko.com/" target="_blank">Partner portal</a></li>
                <li><a href="https://partners.tradegecko.com/directory" target="_blank">Find a partner</a></li>
                <li><a href="https://developer.tradegecko.com/" target="_blank">Developers & API</a></li>
            </ul>
          </div>
      </div>
    </div>
  </div>
</div>

    </div>

    <link href="https://d3ds1rcygteua7.cloudfront.net/assets/fonts/avenir.css" rel="stylesheet">
    <script>
      window.intercomSettings = {
        app_id: "i0krnes0"
      };
    </script>
    <script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/i0krnes0';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>
  </body>
  <script>
    var state = false;
    var nav = document.querySelector('nav');
    var burger = document.querySelector('.burger');
    burger.onclick = function(){
      let display = state ? 'none' : 'block';
      nav.style.display = display;
      state = !state;
    }

    var mql = window.matchMedia('(min-width: 767px)');

    function screenTest() {
      nav.style.display = null;
    }

    mql.addListener(screenTest);

  </script>
</html>
